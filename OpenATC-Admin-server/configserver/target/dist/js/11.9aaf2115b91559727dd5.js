webpackJsonp([11],{"1XRV":function(e,l,a){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var t=a("BO1k"),n=a.n(t),o=a("Dd8w"),i=a.n(o),s=a("ifoU"),c=a.n(s),r=a("NYxO"),u={name:"manualcontrol",components:{},data:function(){return{tableHeight:600,listLoading:!1,channelList:[],id:1,channelstatusList:[{label:"通道状态不指定状态",value:0},{label:"红灯",value:1},{label:"黄灯",value:2},{label:"绿灯",value:3},{label:"绿闪",value:4},{label:"灭灯",value:5},{label:"红闪",value:6}],HoursOption:[{value:0,label:"00"},{value:1,label:"01"},{value:2,label:"02"},{value:3,label:"03"},{value:4,label:"04"},{value:5,label:"05"},{value:6,label:"06"},{value:7,label:"07"},{value:8,label:"08"},{value:9,label:"09"},{value:10,label:"10"},{value:11,label:"11"},{value:12,label:"12"},{value:13,label:"13"},{value:14,label:"14"},{value:15,label:"15"},{value:16,label:"16"},{value:17,label:"17"},{value:18,label:"18"},{value:19,label:"19"},{value:20,label:"20"},{value:21,label:"21"},{value:22,label:"22"},{value:23,label:"23"}],MinuteOption:[{value:0,label:"00"},{value:1,label:"01"},{value:2,label:"02"},{value:3,label:"03"},{value:4,label:"04"},{value:5,label:"05"},{value:6,label:"06"},{value:7,label:"07"},{value:8,label:"08"},{value:9,label:"09"},{value:10,label:"10"},{value:11,label:"11"},{value:12,label:"12"},{value:13,label:"13"},{value:14,label:"14"},{value:15,label:"15"},{value:16,label:"16"},{value:17,label:"17"},{value:18,label:"18"},{value:19,label:"19"},{value:20,label:"20"},{value:21,label:"21"},{value:22,label:"22"},{value:23,label:"23"},{value:24,label:"24"},{value:25,label:"25"},{value:26,label:"26"},{value:27,label:"27"},{value:28,label:"28"},{value:29,label:"29"},{value:30,label:"30"},{value:31,label:"31"},{value:32,label:"32"},{value:33,label:"33"},{value:34,label:"34"},{value:35,label:"35"},{value:36,label:"36"},{value:37,label:"37"},{value:38,label:"38"},{value:39,label:"39"},{value:40,label:"40"},{value:41,label:"41"},{value:42,label:"42"},{value:43,label:"43"},{value:44,label:"44"},{value:45,label:"45"},{value:46,label:"46"},{value:47,label:"47"},{value:48,label:"48"},{value:49,label:"49"},{value:50,label:"50"},{value:51,label:"51"},{value:52,label:"52"},{value:53,label:"53"},{value:54,label:"54"},{value:55,label:"55"},{value:56,label:"56"},{value:57,label:"57"},{value:58,label:"58"},{value:59,label:"59"}],typeOptions:new c.a([[0,"不启用"],[2,"机动车相位"],[3,"行人相位"],[4,"跟随相位"],[5,"跟随行人相位"]])}},computed:i()({},Object(r.c)({channellock:function(e){return e.globalParam.tscParam.channellock}})),mounted:function(){var e=this;e.$nextTick(function(){e.tableHeight=window.innerHeight-document.querySelector("#footerBtn").offsetTop-150,window.onresize=function(){e.screenHeight=window.innerHeight}})},watch:{screenHeight:function(){this.tableHeight=window.innerHeight-document.querySelector("#footerBtn").offsetTop-150}},created:function(){this.globalParamModel=this.$store.getters.globalParamModel},methods:{handdleChannelLock:function(e,l,a){this.channelList=e.channellocKinfo},deleteAllData:function(){var e=this;this.$confirm(this.$t("edge.channellock.deleteAlltip"),this.$t("edge.common.alarm"),{confirmButtonText:this.$t("edge.common.confirm"),cancelButtonText:this.$t("edge.common.cancel"),type:"warning"}).then(function(){var l=e.globalParamModel.getParamsByType("channellock");e.globalParamModel.deleteParamsByType("channellock",0,l.length),e.channelList=[],e.id=1,e.$message({type:"success",message:e.$t("edge.common.deletesucess")})}).catch(function(){e.$message({type:"info",message:e.$t("edge.common.deletecancel")})})},handleDelete:function(e,l){var a=this;this.$confirm(this.$t("edge.channellock.deleteOnetip"),this.$t("edge.common.alarm"),{confirmButtonText:this.$t("edge.common.confirm"),cancelButtonText:this.$t("edge.common.cancel"),type:"warning"}).then(function(){a.globalParamModel.deleteParamsByType("channellock",e,1),a.$message({type:"success",message:a.$t("edge.common.deletesucess")})}).catch(function(){a.$message({type:"info",message:a.$t("edge.common.deletecancel")})})},onAdd:function(){this.increaseId();var e=this.globalParamModel.getParamsByType("channelList"),l=[],a=!0,t=!1,o=void 0;try{for(var i,s=n()(e);!(a=(i=s.next()).done);a=!0){var c=i.value,r={},u=c.controltype;r.channelid=c.id,r.desc=c.desc+this.typeOptions.get(u),r.lockstatus=0,l.push(r)}}catch(e){t=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(t)throw o}}var d={id:this.id,starthour:0,startmin:0,startsec:0,endhour:0,endmin:0,endsec:0,greenflash:3,yellowlamp:2,channellocKinfo:l};this.globalParamModel.addParamsByType("channellock",d),this.globalParamModel.getParamsByType("channellock").sort(this.compareProperty("id"))},compareProperty:function(e){return function(l,a){return l[e]-a[e]}},increaseId:function(){var e=this.globalParamModel.getParamsByType("channellock"),l=e.map(function(e){return e.id});if(e.length-1>=0)for(var a=1;a<=40;a++)if(!l.includes(a))return void(this.id=a)}}},d={render:function(){var e=this,l=e.$createElement,a=e._self._c||l;return a("div",{staticClass:"manual-record"},[a("div",{staticClass:"manual-top"},[a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:e.onAdd}},[e._v(e._s(e.$t("edge.common.add")))]),e._v(" "),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:e.deleteAllData}},[e._v(e._s(e.$t("edge.common.deleteall")))])],1),e._v(" "),a("div",{staticClass:"manual-bottom",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"manual-control",staticStyle:{display:"inline-block"}},[a("el-table",{staticStyle:{width:"95%","margin-left":"10px"},attrs:{data:e.channellock,fit:"","highlight-current-row":"","max-height":e.tableHeight,border:"",id:"footerBtn"},on:{"row-click":e.handdleChannelLock}},[a("el-table-column",{attrs:{align:"center",label:"No",width:"40"},scopedSlots:e._u([{key:"default",fn:function(l){return[e._v("\n            "+e._s(l.$index+1)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("edge.channellock.starttime"),"min-width":"190",align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{float:"right",width:"80px"},attrs:{size:"small"},model:{value:l.row.starthour,callback:function(a){e.$set(l.row,"starthour",a)},expression:"scope.row.starthour"}},e._l(e.HoursOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",[e._v(":")])]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{float:"left",width:"80px"},attrs:{size:"small"},model:{value:l.row.startmin,callback:function(a){e.$set(l.row,"startmin",a)},expression:"scope.row.startmin"}},e._l(e.MinuteOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("edge.channellock.endtime"),"min-width":"190",align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{float:"right",width:"80px"},attrs:{size:"small"},model:{value:l.row.endhour,callback:function(a){e.$set(l.row,"endhour",a)},expression:"scope.row.endhour"}},e._l(e.HoursOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",[e._v(":")])]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-select",{staticStyle:{float:"left",width:"80px"},attrs:{size:"small"},model:{value:l.row.endmin,callback:function(a){e.$set(l.row,"endmin",a)},expression:"scope.row.endmin"}},e._l(e.MinuteOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"greenflash",align:"center",label:e.$t("edge.channellock.transitiongreenflashtime"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(l){return[a("el-input-number",{staticStyle:{width:"100px"},attrs:{size:"small","controls-position":"right",min:0,max:1e3,step:1},model:{value:l.row.greenflash,callback:function(a){e.$set(l.row,"greenflash",e._n(a))},expression:"scope.row.greenflash"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"yellowlamp",align:"center",label:e.$t("edge.channellock.transitionyellowtime"),width:"180"},scopedSlots:e._u([{key:"default",fn:function(l){return[a("el-input-number",{staticStyle:{width:"100px"},attrs:{size:"small","controls-position":"right",min:0,max:1e3,step:1},model:{value:l.row.yellowlamp,callback:function(a){e.$set(l.row,"yellowlamp",e._n(a))},expression:"scope.row.yellowlamp"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:e.$t("edge.phase.operation"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(l){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDelete(l.$index,l.row)}}},[e._v(e._s(e.$t("edge.common.delete")))])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"manual-tables",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"manual-tables-top"},[a("div",{staticClass:"channel-status"},[e._v(e._s(e.$t("edge.channellock.channelstats")))])]),e._v(" "),a("div",{staticClass:"manual-tables-bottom"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"90%"},attrs:{data:e.channelList,"max-height":e.tableHeight,border:"",id:"footerBtn"}},[a("el-table-column",{attrs:{prop:"channelid",label:e.$t("edge.channellock.channel"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"desc",label:e.$t("edge.channellock.channelinfo"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("edge.channellock.status"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[a("el-select",{attrs:{placeholder:e.$t("edge.common.select"),size:"small"},model:{value:l.row.lockstatus,callback:function(a){e.$set(l.row,"lockstatus",a)},expression:"scope.row.lockstatus"}},e._l(e.channelstatusList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]}}])})],1)],1)])])])},staticRenderFns:[]};var b=a("VU/8")(u,d,!1,function(e){a("tdM6"),a("Ei5c")},"data-v-66cc0a85",null);l.default=b.exports},"5j2h":function(e,l,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},Ei5c:function(e,l,a){var t=a("Lnp/");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);a("rjj0")("516a5aee",t,!0)},"Lnp/":function(e,l,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.control-model .el-input__inner {\n  -webkit-appearance: none;\n  background-image: none;\n  border-radius: 4px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  display: inline-block;\n  font-size: inherit;\n  height: 34px;\n  line-height: 40px;\n  outline: 0;\n  padding: 0 15px;\n  -webkit-transition: border-color 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);\n  transition: border-color 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);\n  width: 90px;\n}\n",""])},tdM6:function(e,l,a){var t=a("5j2h");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);a("rjj0")("1d38f04f",t,!0)}});