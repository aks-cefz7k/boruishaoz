webpackJsonp([10],{"2Cjc":function(n,t,e){var a=e("x2Bx");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("7220f7ea",a,!0)},"7Io8":function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("Gu7T"),l=e.n(a),o=e("BO1k"),i=e.n(o),s=e("Dd8w"),r=e.n(s),c=e("NYxO"),p=e("Y1to"),u={name:"manualcontrol",components:{},data:function(){return{tableHeight:600,listLoading:!1,manualList:[],channelstatusList:[{label:"红灯",value:1},{label:"绿灯",value:3},{label:"灭灯",value:4}],manualBtnList:[{id:1,name:this.$t("edge.controlpanel.manualbtn1"),btnNameList:4,style:"left: 173px; top: 243px;"},{id:2,name:this.$t("edge.controlpanel.manualbtn2"),btnNameList:4,style:"left: 403px; top: 243px;"},{id:3,name:this.$t("edge.controlpanel.manualbtn3"),btnNameList:4,style:"left: 632px; top: 243px;"},{id:4,name:this.$t("edge.controlpanel.manualbtn4"),btnNameList:4,style:"left: 300px; top: 346px;"},{id:5,name:this.$t("edge.controlpanel.manualbtn5"),btnNameList:4,style:"left: 506px; top: 346px;"},{id:6,name:this.$t("edge.controlpanel.manualbtn6"),btnNameList:4,style:"left: 173px; top: 449px;"},{id:7,name:this.$t("edge.controlpanel.manualbtn7"),btnNameList:4,style:"left: 403px; top: 449px;"},{id:8,name:this.$t("edge.controlpanel.manualbtn8"),btnNameList:4,style:"left: 632px; top: 449px;"},{id:9,name:"Y1",btnNameList:2,style:"left: 167px; top: 562px;"},{id:10,name:"Y2",btnNameList:2,style:"left: 320px; top: 562px;"},{id:11,name:"Y3",btnNameList:2,style:"left: 473px; top: 562px;"},{id:12,name:"Y4",btnNameList:2,style:"left: 626px; top: 562px;"}],currChannelName:"",currChannelId:-1,editStatus:!1,channelList:[]}},computed:r()({},Object(c.c)({manualpanel:function(n){return n.globalParam.tscParam.manualpanel},channelDescMap:function(n){return n.globalParam.channelDescMap}})),watch:{manualpanel:function(n){this.initManualPanel()}},created:function(){this.globalParamModel=this.$store.getters.globalParamModel,this.initManualPanel(),this.getChannelList()},methods:{initManualPanel:function(){this.manualList=[],this.currChannelId=-1},getChannelList:function(){var n=this;Object(p.a)().then(function(t){var e=t.data;if(!e.success)return"4003"===e.code?void n.$message.error(n.$t("edge.errorTip.devicenotonline")):void n.$message.error(t.data.message);n.channelList=e.data.data.channelList}).catch(function(t){n.$message.error(t),console.log(t)})},getAllManualpanel:function(){var n=this;Object(p.c)().then(function(t){var e=t.data;if(!e.success)return"4003"===e.code?void n.$message.error(n.$t("edge.errorTip.devicenotonline")):void n.$message.error(t.data.message);console.log(e)}).catch(function(t){n.$message.error(t),console.log(t)})},manualBtnClicked:function(n){if(this.currChannelId===n.id)this.currChannelName="",this.currChannelId=-1,this.manualList=[];else{this.currChannelName=n.name,this.currChannelId=n.id;var t=this.manualpanel.keyconfig;if(void 0===t)return;var e=t.filter(function(t){return t.keynum===n.id});if(0===e.length)return void(this.manualList=[]);this.manualList=e[0].channel;var a=!0,l=!1,o=void 0;try{for(var s,r=i()(this.manualList);!(a=(s=r.next()).done);a=!0){var c=s.value;c.desc=this.channelDescMap.get(c.channelid)}}catch(n){l=!0,o=n}finally{try{!a&&r.return&&r.return()}finally{if(l)throw o}}}},edit:function(){this.editStatus=!0,this.manualpanel.controlmode=1},reset:function(){var n=this;this.$confirm(this.$t("edge.controlpanel.changered"),this.$t("edge.controlpanel.tips"),{confirmButtonText:this.$t("edge.button.OK"),cancelButtonText:this.$t("edge.button.Cancel"),type:"warning",center:!0}).then(function(){n.manualList.map(function(n){n.channelstatus=1});var t=n.manualpanel.keyconfig,e=!0,a=!1,l=void 0;try{for(var o,s=i()(t);!(e=(o=s.next()).done);e=!0){var r=o.value;if(r.keynum===n.currChannelId)r.channel.map(function(n){n.channelstatus=1})}}catch(n){a=!0,l=n}finally{try{!e&&s.return&&s.return()}finally{if(a)throw l}}}).catch(function(){n.$message({type:"info",message:n.$t("edge.controlpanel.cancelinit")})})},clearChannel:function(){var n=this;this.$confirm(this.$t("edge.controlpanel.iscleardata"),this.$t("edge.controlpanel.tips"),{confirmButtonText:this.$t("edge.button.OK"),cancelButtonText:this.$t("edge.button.Cancel"),type:"warning",center:!0}).then(function(){var t=n.manualpanel.keyconfig,e=!0,a=!1,l=void 0;try{for(var o,s=i()(t);!(e=(o=s.next()).done);e=!0){var r=o.value;r.keynum===n.currChannelId&&(n.manualList=[],r.channel=[])}}catch(n){a=!0,l=n}finally{try{!e&&s.return&&s.return()}finally{if(a)throw l}}}).catch(function(){n.$message({type:"info",message:n.$t("edge.controlpanel.cancelclear")})})},resetDefaultManualpanel:function(){var n=this,t={},e=this.globalParamModel.getParamsByType("phaseList"),a=this.globalParamModel.getParamsByType("channelList");0!==e.length&&0!==a.length?(t.phaseList=e,t.channelList=a,Object(p.b)(t).then(function(t){var e=t.data;if(!e.success)return"4003"===e.code?void n.$message.error(n.$t("edge.errorTip.devicenotonline")):void n.$message.error(t.data.message);n.$alert(n.$t("edge.controlpanel.getdefaultmanualpaneltips"),{type:"success"}),n.$store.getters.tscParam.manualpanel=e.data}).catch(function(t){n.$message.error(t),console.log(t)})):this.$message.error(this.$t("edge.controlpanel.phaseanddetectornotnull"))},editPanelName:function(){var n=this.currChannelId,t=!0,e=!1,a=void 0;try{for(var o,s=i()(this.manualBtnList);!(t=(o=s.next()).done);t=!0){var r=o.value;if(r.id===n){r.name=this.currChannelName;var c=this.currChannelName,p=[].concat(l()(c)).length;r.btnNameList=p}}}catch(n){e=!0,a=n}finally{try{!t&&s.return&&s.return()}finally{if(e)throw a}}this.editStatus=!1},getBtnName:function(n){return[].concat(l()(n)).length<11?n:n.substring(0,10)+"..."},allclear:function(){this.$store.dispatch("ClearManualPanel")}}},d={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"manual-record"},[e("div",{staticClass:"manual-top"},[e("div",{staticClass:"control-model"},[e("div",{staticClass:"control-model-name"},[n._v(n._s(n.$t("edge.controlpanel.controlmode"))+"：")]),e("div",{staticClass:"control-model-value"},[n._v(n._s(n.$t("edge.controlpanel.manualpanel"+n.manualpanel.controlmode)))]),n._v(" "),e("div",{staticClass:"control-model-name"},[n._v(n._s(n.$t("edge.controlpanel.duration"))+"：")]),e("div",{staticClass:"control-model-input"},[e("el-input",{attrs:{placeholder:"",size:"small"},model:{value:n.manualpanel.duration,callback:function(t){n.$set(n.manualpanel,"duration",n._n(t))},expression:"manualpanel.duration"}})],1),n._v(" "),e("div",{staticClass:"control-model-name"},[n._v(n._s(n.$t("edge.controlpanel.transitiongreenflashtime"))+"：")]),e("div",{staticClass:"control-model-input"},[e("el-input",{attrs:{placeholder:"",size:"small"},model:{value:n.manualpanel.greenflash,callback:function(t){n.$set(n.manualpanel,"greenflash",n._n(t))},expression:"manualpanel.greenflash"}})],1),n._v(" "),e("div",{staticClass:"control-model-name"},[n._v(n._s(n.$t("edge.controlpanel.transitionyellowtime"))+"：")]),e("div",{staticClass:"control-model-input"},[e("el-input",{attrs:{placeholder:"",size:"small"},model:{value:n.manualpanel.yellow,callback:function(t){n.$set(n.manualpanel,"yellow",n._n(t))},expression:"manualpanel.yellow"}})],1),n._v(" "),e("div",{staticClass:"control-model-name"},[n._v(n._s(n.$t("edge.controlpanel.transitionredtime"))+"：")]),e("div",{staticClass:"control-model-input"},[e("el-input",{attrs:{placeholder:"",size:"small"},model:{value:n.manualpanel.redclear,callback:function(t){n.$set(n.manualpanel,"redclear",n._n(t))},expression:"manualpanel.redclear"}})],1),n._v(" "),e("div",{staticClass:"control-model-name"},[n._v(n._s(n.$t("edge.controlpanel.mingreen"))+"：")]),e("div",{staticClass:"control-model-input"},[e("el-input",{attrs:{placeholder:"",size:"small"},model:{value:n.manualpanel.mingreen,callback:function(t){n.$set(n.manualpanel,"mingreen",n._n(t))},expression:"manualpanel.mingreen"}})],1)])]),n._v(" "),e("div",{staticClass:"manual-bottom",staticStyle:{display:"inline-block"}},[e("div",{staticClass:"manual-control",staticStyle:{display:"inline-block"}},[e("div",{staticClass:"manualControl-kanban"},[e("svg-icon",{staticClass:"manualControl-background",attrs:{"icon-class":n.$t("edge.controlpanel.manualcontrolbackground")}}),n._v(" "),e("div",{staticClass:"manual-button",staticStyle:{left:"201px",top:"150px"}},[e("span",{staticClass:"button-name"},[n._v(n._s(n.$t("edge.controlpanel.step")))])]),n._v(" "),e("div",{staticClass:"manual-button",staticStyle:{left:"393px",top:"150px"}},[e("span",{staticClass:"button-name"},[n._v(n._s(n.$t("edge.controlpanel.allred")))])]),n._v(" "),e("div",{staticClass:"manual-button",staticStyle:{left:"585px",top:"150px"}},[e("span",{staticClass:"button-name"},[n._v(n._s(n.$t("edge.controlpanel.yellowflash")))])]),n._v(" "),n._l(n.manualBtnList,function(t,a){return e("div",{key:a},[e("div",{class:t.id>8?t.id===n.currChannelId?"select-rectangle-button":"rectangle-button":t.id===n.currChannelId?"select-circle-button":"circle-button",style:t.style,on:{click:function(e){return n.manualBtnClicked(t)}}},[t.id<9?e("span",{class:t.id===n.currChannelId?"select-cycle-name":"cycle-name",style:t.btnNameList>4?"width: 52px; left: 15px; font-size: 10px; line-height: 15px;":""},[n._v(n._s(n.getBtnName(t.name)))]):e("span",{class:t.id===n.currChannelId?"select-rectangle-name":"rectangle-name",style:t.btnNameList>4?"top: 5px;width: 70px; left: 10px; font-size: 10px;":""},[n._v(n._s(n.getBtnName(t.name)))])])])})],2),n._v(" "),e("div",{staticClass:"manual-control-button"},[e("el-button",{attrs:{type:"primary"},on:{click:n.resetDefaultManualpanel}},[n._v(n._s(n.$t("edge.controlpanel.defaultsettings")))]),n._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:n.allclear}},[n._v(n._s(n.$t("edge.controlpanel.allclear")))])],1)]),n._v(" "),e("div",{staticClass:"manual-tables",staticStyle:{display:"inline-block"}},[e("div",{staticClass:"manual-tables-top"},[e("div",{staticClass:"manual-tables-cycle"}),n._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:-1!==n.currChannelId,expression:"currChannelId !== -1"}]},[e("div",{directives:[{name:"show",rawName:"v-show",value:!n.editStatus,expression:"!editStatus"}]},[e("div",{staticClass:"manual-tables-name"},[n._v(n._s(n.currChannelName))]),e("div",{staticClass:"manual-tables-edit",on:{click:n.edit}},[e("i",{staticClass:"el-icon-edit"})])]),n._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:n.editStatus,expression:"editStatus"}],staticClass:"manual-tables-name"},[e("el-input",{attrs:{placeholder:n.$t("edge.common.entercontent"),size:"mini"},on:{blur:n.editPanelName},model:{value:n.currChannelName,callback:function(t){n.currChannelName=t},expression:"currChannelName"}})],1),n._v(" "),e("div",{staticClass:"manual-tables-clear"},[e("i",{staticClass:"el-icon-delete"}),e("span",{staticClass:"manual-tables-qingkong",on:{click:n.clearChannel}},[n._v(n._s(n.$t("edge.controlpanel.clear")))]),e("svg-icon",{staticStyle:{"margin-left":"20px"},attrs:{"icon-class":"huangshan"}}),e("span",{staticClass:"manual-tables-qingkong",on:{click:n.reset}},[n._v(n._s(n.$t("edge.controlpanel.resetstatus")))])],1)])]),n._v(" "),e("div",{staticClass:"manual-tables-bottom"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:n.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"90%"},attrs:{data:n.manualList,size:"small","max-height":n.tableHeight,id:"footerBtn"}},[e("el-table-column",{attrs:{type:"index",align:"center"}}),n._v(" "),e("el-table-column",{attrs:{prop:"channelid",label:n.$t("edge.controlpanel.channel"),align:"center"}}),n._v(" "),e("el-table-column",{attrs:{prop:"desc",label:n.$t("edge.controlpanel.channeldesc"),align:"center"}}),n._v(" "),e("el-table-column",{attrs:{label:n.$t("edge.controlpanel.status"),align:"center"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("el-select",{attrs:{placeholder:n.$t("edge.common.select"),size:"small"},model:{value:t.row.channelstatus,callback:function(e){n.$set(t.row,"channelstatus",e)},expression:"scope.row.channelstatus"}},n._l(n.channelstatusList,function(t){return e("el-option",{key:t.value,attrs:{label:n.$t("edge.controlpanel.channelstatus"+t.value),value:t.value}})}),1)]}}])})],1)],1)])])])},staticRenderFns:[]};var m=e("VU/8")(u,d,!1,function(n){e("2Cjc"),e("V5kQ")},"data-v-f137bf76",null);t.default=m.exports},"8kFK":function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"",""])},V5kQ:function(n,t,e){var a=e("8kFK");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("6466b64d",a,!0)},Y1to:function(n,t,e){"use strict";t.c=function(){var n=Object(l.c)(),t=new a.a("getManualpanel"),e={};return e.agentid=n,e.operation="get-request",e.infotype="system/manualpanel",t.Send({},e)},t.a=function(){var n=Object(l.c)(),t=new a.a("getChannel"),e={};return e.agentid=n,e.operation="get-request",e.infotype="feature/channel",t.Send({},e)},t.b=function(n){return new a.a("getDefaultManualpanel").Send({},n)};var a=e("BtRb"),l=e("TIfe")},x2Bx:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n.manual-record[data-v-f137bf76] {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  min-width: 1700px;\n}\n.manual-bottom[data-v-f137bf76] {\n  width: 100%;\n}\n.manual-control[data-v-f137bf76] {\n  width: 50%;\n}\n.manual-tables[data-v-f137bf76] {\n  float: right;\n  width: 50%;\n}\n.control-model[data-v-f137bf76] {\n  float: left;\n  max-height: 50px;\n}\n.control-model-input[data-v-f137bf76] {\n  float: left;\n  margin-left: 5px;\n  margin-top: 22px;\n}\n.manualControl-background[data-v-f137bf76] {\n  position: relative;\n  width: 848px;\n  height: 600px;\n  margin-left: 30px;\n  margin-top: 30px;\n}\n.manualControl-kanban[data-v-f137bf76] {\n  width: 100%;\n  height: 85%;\n}\n.manual-button[data-v-f137bf76] {\n  position: absolute;\n  width: 101px;\n  height: 65px;\n  background-color: rgba(48, 49, 51, 0.3);\n  border-radius: 6px;\n  z-index: 9;\n}\n.circle-button[data-v-f137bf76] {\n  position: absolute;\n  width: 81px;\n  height: 80px;\n  background-color: #303133;\n  border-radius: 60px;\n  cursor: pointer;\n  z-index: 9;\n}\n.select-circle-button[data-v-f137bf76] {\n  position: absolute;\n  width: 81px;\n  height: 80px;\n  background-color: #303133;\n  -webkit-box-shadow: 0px 3px 7px 0px rgba(5, 27, 49, 0.35);\n          box-shadow: 0px 3px 7px 0px rgba(5, 27, 49, 0.35);\n  border: solid 4px #409eff;\n  border-radius: 60px;\n  cursor: pointer;\n  z-index: 9;\n}\n.rectangle-button[data-v-f137bf76] {\n  position: absolute;\n  width: 93px;\n  height: 45px;\n  background-color: #303133;\n  border-radius: 6px;\n  cursor: pointer;\n  z-index: 9;\n}\n.select-rectangle-button[data-v-f137bf76] {\n  position: absolute;\n  width: 93px;\n  height: 45px;\n  background-color: #303133;\n  -webkit-box-shadow: 0px 3px 7px 0px rgba(5, 27, 49, 0.35);\n          box-shadow: 0px 3px 7px 0px rgba(5, 27, 49, 0.35);\n  border: solid 4px #409eff;\n  border-radius: 6px;\n  cursor: pointer;\n  z-index: 9;\n}\n.button-name[data-v-f137bf76] {\n  position: absolute;\n  top: 24px;\n  left: 32px;\n  font-size: 16px;\n  font-weight: normal;\n  font-stretch: normal;\n  line-height: 14px;\n  letter-spacing: 0px;\n  color: #ffffff;\n}\n.cycle-name[data-v-f137bf76] {\n  position: absolute;\n  top: 20px;\n  left: 24px;\n  width: 32px;\n  height: 36px;\n  font-size: 16px;\n  font-weight: normal;\n  font-stretch: normal;\n  line-height: 20px;\n  letter-spacing: 0px;\n  color: #ffffff;\n}\n.select-cycle-name[data-v-f137bf76] {\n  position: absolute;\n  top: 16px;\n  left: 20px;\n  width: 32px;\n  height: 36px;\n  font-size: 16px;\n  font-weight: normal;\n  font-stretch: normal;\n  line-height: 20px;\n  letter-spacing: 0px;\n  color: #ffffff;\n}\n.rectangle-name[data-v-f137bf76] {\n  position: absolute;\n  top: 15px;\n  left: 35px;\n  width: 18px;\n  height: 12px;\n  font-size: 16px;\n  font-weight: normal;\n  font-stretch: normal;\n  line-height: 14px;\n  letter-spacing: 0px;\n  color: #ffffff;\n}\n.select-rectangle-name[data-v-f137bf76] {\n  position: absolute;\n  top: 11px;\n  left: 31px;\n  width: 18px;\n  height: 12px;\n  font-size: 16px;\n  font-weight: normal;\n  font-stretch: normal;\n  line-height: 14px;\n  letter-spacing: 0px;\n  color: #ffffff;\n}\n.manual-control-button[data-v-f137bf76] {\n  margin-top: 20px;\n  text-align: center;\n}\n.manual-tables-cycle[data-v-f137bf76] {\n  float: left;\n  margin-left: 40px;\n  margin-top: 30px;\n  border-radius: 60px;\n  width: 8px;\n  height: 8px;\n  background-color: #409eff;\n}\n.manual-tables-edit[data-v-f137bf76] {\n  float: left;\n  margin-top: 25px;\n  margin-left: 3px;\n  width: 14px;\n  height: 16px;\n  color: #409eff;\n  cursor: pointer;\n}\n.manual-tables-clear[data-v-f137bf76] {\n  position: absolute;\n  right: 15px;\n  margin-top: 25px;\n  width: 200px;\n  height: 20px;\n  color: #409eff;\n}\n.manual-tables-qingkong[data-v-f137bf76] {\n  margin-left: 5px;\n  font-size: 14px;\n  font-weight: normal;\n  font-stretch: normal;\n  line-height: 20px;\n  letter-spacing: 0px;\n  cursor: pointer;\n}\n.manual-tables-bottom[data-v-f137bf76] {\n  width: 100%;\n  float: left;\n  margin-left: 40px;\n  margin-top: 30px;\n}\n",""])}});