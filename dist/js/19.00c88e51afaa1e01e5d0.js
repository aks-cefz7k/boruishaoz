webpackJsonp([19],{Px7p:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},hvkY:function(t,e,a){var s=a("Px7p");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("69d2390c",s,!0)},meih:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("BO1k"),i=a.n(s),o=a("BtRb"),r=a("TIfe");var c=a("XLwt"),n=a.n(c),l={name:"statistics",components:{},data:function(){return{listLoading:!1,radio:0,allFlowData:[],tableData:[],dateData:[],flowData:[],occupancyData:[],detectorList:[],loading:{},userName:"",password:""}},watch:{},mounted:function(){this.initEcharts(),this.getEchartsData()},created:function(){},methods:{getStatisticsData1:function(){var t=this;(function(t){var e=Object(r.c)(),a=new o.a("setVolumelog"),s={};return s.agentid=e,s.operation="set-request",s.infotype="system/volumelog",s.data=t,a.Send({},s)})({udiskset:1,gainstatus:1}).then(function(e){var a=e.data;if(!a.success)return"4003"===a.code?void t.$message.error(t.$t("edge.errorTip.devicenotonline")):void t.$message.error(e.data.message);t.software=a.data.data.software,t.hardware=a.data.data.hardware}).catch(function(e){t.$message.error(e.message),console.log(e)})},handleDetector:function(t){this.radio=t,this.handleData(this.allFlowData)},getStatisticsData:function(){var t=this,e=this.userName,a=this.password;""!==e&&""!==a?(this.lockScreen(),function(t,e){var a={agentid:Object(r.c)(),username:t,password:e};return new o.a("getHistoryFlow").Send({},a)}(e,a).then(function(e){var a=e.data;if(!a.success)return t.unlockScreen(),"4003"===a.code?void t.$message.error(t.$t("edge.errorTip.devicenotonline")):void t.$message.error(e.data.message);t.unlockScreen(),0!==a.data.length?(t.detectorList=a.data[0].detector,t.allFlowData=a.data,t.handleData(t.allFlowData)):t.$message.error(t.$t("edge.statistics.historicalisempty"))}).catch(function(e){t.unlockScreen(),t.$message.error(e.message),console.log(e)})):this.$message.error(this.$t("edge.statistics.userpassnotnull"))},handleData:function(t){var e=this.radio,a=!0,s=!1,o=void 0;try{for(var r,c=i()(t);!(a=(r=c.next()).done);a=!0){var n=r.value,l={};l.time=n.time,l.smallvehnum=n.detector[e].smallvehnum,l.totalVehtime=n.detector[e].totalVehtime,l.occupyrate=n.detector[e].occupyrate,this.dateData.push(n.time),this.tableData.push(l),this.flowData.push(n.detector[e].totalVehtime),this.occupancyData.push(n.detector[e].occupyrate)}}catch(t){s=!0,o=t}finally{try{!a&&c.return&&c.return()}finally{if(s)throw o}}this.getEchartsData()},initEcharts:function(){this.historyFlowEcharts=n.a.init(document.getElementById("historyFlowEcharts"));var t=this;window.onresize=function(){t.historyFlowEcharts.resize()}},getEchartsData:function(){var t={legend:{data:[this.$t("edge.statistics.flow"),this.$t("edge.statistics.occupyrate")],right:"2%"},tooltip:{trigger:"axis"},grid:{left:"2%",right:"2%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:this.dateData},yAxis:{type:"value"},series:[{name:this.$t("edge.statistics.flow"),data:this.flowData,type:"line",smooth:!0},{name:this.$t("edge.statistics.occupyrate"),data:this.occupancyData,type:"line",smooth:!0}]};this.historyFlowEcharts.setOption(t)},lockScreen:function(){this.loading=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},unlockScreen:function(){this.loading.close()}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"statistics"},[a("div",{staticClass:"one"},[a("div",{staticClass:"statistics-name"},[t._v(t._s(t.$t("edge.statistics.username")))]),t._v(" "),a("div",{staticClass:"statistics-input"},[a("el-input",{attrs:{placeholder:t.$t("edge.statistics.usernameplaceholder"),size:"small"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),t._v(" "),a("div",{staticClass:"statistics-name"},[t._v(t._s(t.$t("edge.statistics.pass")))]),t._v(" "),a("div",{staticClass:"statistics-input"},[a("el-input",{attrs:{placeholder:t.$t("edge.statistics.passplaceholder"),size:"small","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("div",{staticClass:"statistics-bottom"},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:t.getStatisticsData}},[t._v(t._s(t.$t("edge.statistics.getdevicedata")))])],1),t._v(" "),a("div",{staticClass:"statistics-button"},t._l(t.detectorList,function(e,s){return a("el-radio-group",{key:s,on:{change:t.handleDetector},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio-button",{attrs:{label:s}},[t._v(t._s(t.$t("edge.statistics.detector")+e.id))])],1)}),1)]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"three"},[a("div",{staticClass:"statistics-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"380",size:"small",id:"footerBtn"}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"110px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:t.$t("edge.statistics.time"),align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"smallvehnum",label:t.$t("edge.statistics.flow"),align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"occupyrate",label:t.$t("edge.statistics.occupyrate"),align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalVehtime",label:t.$t("edge.statistics.occupytime"),align:"center"}})],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"two"},[e("div",{staticClass:"flow-echarts",attrs:{id:"historyFlowEcharts"}})])}]};var u=a("VU/8")(l,d,!1,function(t){a("hvkY")},"data-v-3b0b1fe2",null);e.default=u.exports}});